<h1 align=center>Webserver SSL</h1>

## indice

- [Criando o container](#criando-o-container)
- [Pacotes instalados](#pacotes-instalados)
- [Criando vhost](#criando-vhost)
- [Testando](#testando)
- [Contribuindo](#contribuindo)



<p>A ideia desse webserver √© para validar um certificado do tipo SSL, de forma simples atrav√©s do browser.</p>

## Criando o container

<p>O container ser√° criado em cima de uma imagem do Ubuntu 20, onde vamos instalar o apache2. Mas por que n√£o utilizar logo uma imagem do Apache ou Nginx? Eu j√° tive muita dor de cabe√ßa para configurar, resolvi fazer minha pr√≥pria imagem!
<br>
Rode no terminal : <br>

    docker run -dit --name webserver_test_ssl -h webserverssl -p 8443:443 -v /seu_path_de_certificados/:/path_que_quer_alocar --restart always ubuntu:20.04 
Sendo <b>/seu_path_de_certificados</b> onde est√£o seus certificados do tipo SSL, altere para o seu path. A minha estrutura √© : <br>
    
    /certificado/
        |apache-files/
            |webserver/
                |conf.cert/
                    |streamerspb/
                        |certificado.crt

E por se tratar de SSL iremos utilizar o protocolo HTTPS, utilize uma porta referente ao protocolo, se poss√≠vel uma que n√£o esteja sendo utilizada no momento.
</p>

## Pacotes instalados

<p>Foram instalados na imagem : 
<ul>
<li>openssl</li>
<li>curl</li>
<li>net-tools</li>
<li>ssl-cert</li>
<li>apache2</li>
<li>vim</li>
</ul>

## Criando Vhost

<p>Segue o exemplo de vhost que ser√° necess√°rio para utilizarmos aqui no nosso projeto :
<br>
Lembre de alterar o path dos certificados, tamb√©m alterar o dom√≠nio em ServerName.<br>
<b>Obs.: Caso tenha v√°rios certificados, fa√ßa um vhost para cada</b>

    <VirtualHost *:443>
    ServerName seu.dominio.com.br
    DocumentRoot /var/www/html

    # SSL Configuration
    SSLEngine On
    SSLCertificateFile /etc/apache2/ssl/conf.cert/certificado.crt
    SSLCertificateKeyFile /etc/apache2/ssl/conf.cert/certificado.key
    SSLCertificateChainFile /etc/apache2/ssl/conf.cert/cadeia_de_certificado.crt

    # Other Apache Configuration
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
    </VirtualHost>

Seja organizado, crie um diret√≥rio para armazenar os vhosts, adote um padr√£o como : vhost-seu-site.conf .

<b>Obs.: adicione o host do container no seu /etc/hosts (estou trabalhando em Linux, caso esteja rodando o container em Windows, o path √© \windows\system32\drivers\etc\hosts) , exemplo :

    127.0.0.1   seusite.com.br
</b>

Os vhosts, s√£o adicionados no path <b>/etc/apache2/sites-available/</b>, para ativa-los, rode : <b>a2ensite *.conf </b> , restarte o apache .

## Testando
<p>Abra o browser de sua prefer√™ncia, e na barra de endere√ßo entre com : <b>https://seusite.com.br:8443</b> , lembre, voc√™ mapeou uma porta para HTTPS(8443), se tiver seguido todo o pass-a-passo, na barra de endere√ßo ter√° o cadeado lindo de ai meu deus! <b>üîí seusite.com.br:8443</b> , clique no cadeado para poder ver as informa√ß√µes do certificado.
</p>
<b>Dica : Se estiver usando linux, pode utilizar o comando : openssl s_client -connect seusite.com.br:8443, ele vai retornar as informa√ß√µes do certificado no terminal</b>

<br><b>Obs.: N√£o irei disponibilizar a imagem no hub docker, por ter informa√ß√µes confidenciais, por isso o passo a passo de como criar e configurar!</b>

## Contribuindo
<p>Qualquer contribui√ß√£o que voc√™ fizer ser√° bem vinda, analisada e se vi√°vel, atualizada no projeto!
<ul>
<li>1.Fa√ßa um fork do projeto</li>
<li>2.Clone o seu fork para sua maquina(git clone url-do-projeto.git)</li>
<li>3.Crie um branch para sua modifica√ß√£o/atualiza√ß√£o(git checkout -b seu-branch)</li>
<li>4.Adicione suas altera√ß√µes ao git(git add .)</li>
<li>5.Confirme suas altera√ß√µes(git commit -m "texto descritivo do que fez")</li>
<li>6.Suba seu branch(git push origin seu-branch)</li>
<li>7.Fa√ßa uma solicita√ß√£o de merge request</li>
</ul>
</p>